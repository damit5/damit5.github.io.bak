<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Python实现简单端口扫描器的编写 · Damit5's Blog</title><meta name="description" content="纸上得来终觉浅，绝知此事要躬行。"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--></head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">主页</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   博客</a></li><li class="nav-list-item"><a href="http://damit5.kiwi/AboutMe/" target="_blank" class="nav-link">关于我</a></li><li class="nav-list-item"><a href="http://damit5.kiwi/Link/" target="_blank" class="nav-link">友情链接</a></li><li class="nav-list-item"><a href="https://github.com/damit5" target="_blank" class="nav-link">github</a></li><li class="nav-list-item"><a href="mailto:damit5@protonmail.com" target="_blank" class="nav-link">email</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2017/09/30/Python实现简单端口扫描器的编写/" class="post-title-link">Python实现简单端口扫描器的编写</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/tags/Python/" class="post-tag-link">Python</a></li></ul><div class="post-time">2017年9月30日 星期六</div></div><div class="post-content"><script src="/assets/js/APlayer.min.js"> </script><audio autoplay="autoplay" loop="loop" preload="auto" src="http://118.89.200.239/Music/Maroon%205,Wiz%20Khalifa%20-%20Payphone.mp3"></audio>

<h2 id="0×00-前言"><a href="#0×00-前言" class="headerlink" title="0×00 前言"></a>0×00 前言</h2><p>没错，这就是上个帖子所说的简单的端口扫描器</p>
<p>加了颜色过后确实逼格猛涨</p>
<p>废话不多说，开始记录下这有趣的故事</p>
<h2 id="0×01-正文"><a href="#0×01-正文" class="headerlink" title="0×01 正文"></a>0×01 正文</h2><h4 id="Step-0-意淫一下写这个扫描器的思路"><a href="#Step-0-意淫一下写这个扫描器的思路" class="headerlink" title="Step 0 : 意淫一下写这个扫描器的思路"></a>Step 0 : 意淫一下写这个扫描器的思路</h4><ul>
<li>用户输入网址，转换为IP（直接IP也行）</li>
<li>传入的参数需要用 sys 来判定</li>
<li>需要使用socket模块来完成端口的扫描</li>
<li>扫描单独写一个方法</li>
<li>终端输出改变颜色提升逼格<h4 id="Step-1-引入我们需要的模块"><a href="#Step-1-引入我们需要的模块" class="headerlink" title="Step 1 : 引入我们需要的模块"></a>Step 1 : 引入我们需要的模块</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">import sys</div><div class="line">import socket</div><div class="line">from color import *</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Step-2-扫描端口是否开启的方法-scan"><a href="#Step-2-扫描端口是否开启的方法-scan" class="headerlink" title="Step 2 : 扫描端口是否开启的方法 scan()"></a>Step 2 : 扫描端口是否开启的方法 scan()</h4><h5 id="设置超时时间，防止等太久"><a href="#设置超时时间，防止等太久" class="headerlink" title="设置超时时间，防止等太久"></a>设置超时时间，防止等太久</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">socket.setdefaulttimeout(3)</div></pre></td></tr></table></figure>
<h5 id="创建一个socket对象"><a href="#创建一个socket对象" class="headerlink" title="创建一个socket对象"></a>创建一个<code>socket</code>对象</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)</div></pre></td></tr></table></figure>
<p><code>AF_INET</code> 表示IPV4</p>
<p><code>SOCK_STREAM</code> 表示TCP</p>
<h5 id="然后用connect方法连接"><a href="#然后用connect方法连接" class="headerlink" title="然后用connect方法连接"></a>然后用<code>connect</code>方法连接</h5><blockquote>
<p>PS : connect()中传入的是一个tuple<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s.connect((ip,port))</div></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="Step-3-主函数的书写（获取IP和端口）"><a href="#Step-3-主函数的书写（获取IP和端口）" class="headerlink" title="Step 3 : 主函数的书写（获取IP和端口）"></a>Step 3 : 主函数的书写（获取IP和端口）</h4><h5 id="判断是否传入正确的参数"><a href="#判断是否传入正确的参数" class="headerlink" title="判断是否传入正确的参数"></a>判断是否传入正确的参数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if len(sys.argv) == 2:</div><div class="line"></div><div class="line">else:</div><div class="line">    print &apos;usage : python portscan.py &lt;url&gt;&apos;</div></pre></td></tr></table></figure>
<h5 id="获取传入参数的IP地址和想要扫描的端口"><a href="#获取传入参数的IP地址和想要扫描的端口" class="headerlink" title="获取传入参数的IP地址和想要扫描的端口"></a>获取传入参数的IP地址和想要扫描的端口</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">url = sys.argv[1]</div><div class="line">ip = socket.gethostbyname(url)</div><div class="line">portlist = [22,80,81,445,3306,3389,8080]</div></pre></td></tr></table></figure>
<h5 id="将端口和IP使用scan-方法进行测试"><a href="#将端口和IP使用scan-方法进行测试" class="headerlink" title="将端口和IP使用scan()方法进行测试"></a>将端口和IP使用scan()方法进行测试</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">for port in portlist:</div><div class="line">    result = scan(ip,port)</div><div class="line">    if result:</div><div class="line">        printGreen (&apos;[+] Port %d is open&apos; %port)</div><div class="line">    else:</div><div class="line">        printRed (&apos;[-] Port %d is closed&apos; %port)</div></pre></td></tr></table></figure>
<h2 id="0×02-测试结果"><a href="#0×02-测试结果" class="headerlink" title="0×02 测试结果"></a>0×02 测试结果</h2><p><img src="http://r.photo.store.qq.com/psb?/V12DlJ9S2zSi6P/P2.49hByZWzkP3ezOtTOULCciFPS*NuNVfqoxWT4zIA!/r/dHYBAAAAAAAA" alt="damit5"><br><img src="http://r.photo.store.qq.com/psb?/V12DlJ9S2zSi6P/w1rAOST0SYL7VJLKyqwzS7FJZCe9v.iaHwTahTw9Zb0!/r/dIUBAAAAAAAA" alt="local"></p>
</div></article><div class="pagination"><a href="/2017/09/30/Meterpreter-常用命令和后渗透/" class="pagination-prev">PREV</a><a href="/2017/09/30/Python在Windows-Linux中输出彩色文字/" class="pagination-next">NEXT</a></div><div class="comments"></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Metasploit-Framework/">Metasploit-Framework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/其他/">其他</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/权限维持/">权限维持</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/渗透测试/">渗透测试</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Windows-MySQL-的安装/">Windows MySQL 的安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/利用Python-Selenium库模拟登陆/">利用Python Selenium库模拟登陆</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Windows-Shift-后门/">Windows Shift 后门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Python-socket模块实现简易的通信/">Python socket模块实现简易的通信</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Python-argparse-模块的简易使用/">Python argparse 模块的简易使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/MSFvenom使用总结/">MSFvenom使用总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Meterpreter-常用命令和后渗透/">Meterpreter 常用命令和后渗透</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Python实现简单端口扫描器的编写/">Python实现简单端口扫描器的编写</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>© 2017 <a href="/">Damit 5</P></div><div class="power"><p><a href="http://pinggod.com/">Sean Sun</a>, 
<a href="https://hexo.io">Hexo</a>, 
<a href="https://github.com/">GitHub</a>, 
<a href="https://jekyllrb.com/">Jekyll</a></p></div></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-80781234-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?ee75cf111111aa99f8540efa2570970";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>