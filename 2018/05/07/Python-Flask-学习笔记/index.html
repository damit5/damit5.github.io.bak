<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Damit 5">
  <!-- Open Graph Data -->
  <meta property="og:title" content="Python_Flask_学习笔记"/>
  <meta property="og:description" content="纸上得来终觉浅，绝知此事要躬行。" />
  <meta property="og:site_name" content="Damit5&#39;s Blog"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://damit5.com"/>
  
    <link rel="alternate" href="/atom.xml" title="Damit5&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>Damit5's Blog</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.dark.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/background.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">Python_Flask_学习笔记</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/damit5/">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:damit5@protonmail.com">
                  
                  Email
                  
                </a>
              </li>
            
              <li>
                <a href="https://damit5.github.io/AboutMe">
                  
                  AboutMe
                  
                </a>
              </li>
            
              <li>
                <a href="https://damit5.github.io/Link">
                  
                  Friend Link
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Damit 5</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2018-05-07</span>
            <span class="time">17:32:31</span>
          </span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/Python/">#Python</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <script src="/assets/js/APlayer.min.js"> </script><div id="aplayer6" class="aplayer" style="margin-bottom: 20px;"></div>
		<script>
			new APlayer({
				element: document.getElementById("aplayer6"),
				narrow: false,
				autoplay: true,
				showlrc: 0,
				music: {
					title: "六月的雨",
					author: "胡歌",
					url: "https://damit5.github.io/Music/%E5%85%AD%E6%9C%88%E7%9A%84%E9%9B%A8-%E8%83%A1%E6%AD%8C.mp3",
					pic: "https://damit5.github.io/Music/233.jpg",
				}
			});
		</script>
<h2 id="官方完整文档"><a href="#官方完整文档" class="headerlink" title="官方完整文档"></a>官方完整文档</h2><h4 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a><a href="http://www.pythondoc.com/flask/quickstart.html" target="_blank" rel="external">快速入门</a></h4><a id="more"></a>
<p>学习小结</p>
<h2 id="最小应用"><a href="#最小应用" class="headerlink" title="最小应用"></a>最小应用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">from flask import Flask</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line">@app.route(&apos;/&apos;)</div><div class="line">def hello_world():</div><div class="line">    return &apos;Hello World!&apos;</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    app.run()</div></pre></td></tr></table></figure>
<h2 id="run-参数"><a href="#run-参数" class="headerlink" title="run() 参数"></a><code>run()</code> 参数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">app.run(host=&apos;0.0.0.0&apos;,port=80,debug=True)</div></pre></td></tr></table></figure>
<ul>
<li>host : 0.0.0.0 监听所有公开IP</li>
<li>port : 监听的端口，默认为5000</li>
<li>debug : debug 模式，修改代码后会自动重启，上线服务不推荐这样做</li>
</ul>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>简单的来说就是访问你服务器的地址</p>
<p>比如</p>
<p><code>/admin</code> <code>/login</code> <code>/phpMyadmin</code></p>
<h2 id="的问题"><a href="#的问题" class="headerlink" title="/ 的问题"></a><code>/</code> 的问题</h2><p>访问的时候只能少，不能多</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@app.route(&apos;/projects/&apos;)</div><div class="line">def projects():</div><div class="line">    return &apos;The project page&apos;</div><div class="line"></div><div class="line">@app.route(&apos;/about&apos;)</div><div class="line">def about():</div><div class="line">    return &apos;The about page&apos;</div></pre></td></tr></table></figure>
<p>可以访问 <code>/projects</code></p>
<p>但是不能访问 <code>/about/</code>，会抛出<code>404</code>异常</p>
<h2 id="URL-的构造"><a href="#URL-的构造" class="headerlink" title="URL 的构造"></a>URL 的构造</h2><ul>
<li>使用 <code>flask</code> 自带的 <code>url_for</code></li>
<li>使用前需要先从<code>flask</code>模块导入(<code>from flask import url_for</code>)</li>
</ul>
<h4 id="小例子"><a href="#小例子" class="headerlink" title="小例子"></a>小例子</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">from flask import Flask,url_for</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line">@app.route(&apos;/&apos;)</div><div class="line">def hello_world():</div><div class="line">    return &apos;Hello World!&apos;</div><div class="line">@app.route(&apos;/welcome/&lt;name&gt;&apos;)</div><div class="line">def welcome():</div><div class="line">    return str(url_for(&apos;hello_world&apos;))</div><div class="line">@app.route(&apos;/about&apos;)</div><div class="line">def about():</div><div class="line">    return &apos;The about page&apos;</div><div class="line"></div><div class="line">@app.route(&apos;/test&apos;)</div><div class="line">def test():</div><div class="line">    print (url_for(&apos;hello_world&apos;))</div><div class="line">    print (url_for(&apos;about&apos;,abc=&apos;123&apos;))</div><div class="line">    print (url_for(&apos;welcome&apos;,name=&apos;123&apos;))</div><div class="line">    return &apos;test&apos;</div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    app.run(host=&apos;127.0.0.1&apos;,port=80,debug=True)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/</div><div class="line">/about?abc=123</div><div class="line">/welcome/123</div></pre></td></tr></table></figure>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ul>
<li><code>url_for</code>  的参数是已经创建的方法名</li>
<li><code>url_for</code>  中的方法名需要用引号引起来</li>
</ul>
<h2 id="HTTP-方法"><a href="#HTTP-方法" class="headerlink" title="HTTP 方法"></a>HTTP 方法</h2><p>默认只允许 <code>GET</code> 请求</p>
<p>如果要允许其他请求方法，那么则需要通过装饰器提供的 <code>methods</code> 参数来改变</p>
<h4 id="一个小例子"><a href="#一个小例子" class="headerlink" title="一个小例子"></a>一个小例子</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">from flask import Flask,url_for,request</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line">@app.route(&apos;/&apos;,methods=[&apos;POST&apos;,&apos;GET&apos;])</div><div class="line">def index():</div><div class="line">    return request.method</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    app.run(host=&apos;127.0.0.1&apos;,port=80,debug=True)</div></pre></td></tr></table></figure>
<h4 id="常见-HTTP-方法"><a href="#常见-HTTP-方法" class="headerlink" title="常见 HTTP 方法"></a>常见 HTTP 方法</h4><ul>
<li>GET</li>
<li>HEAD</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
<li>OPTIONS</li>
</ul>
<h2 id="渲染模板"><a href="#渲染模板" class="headerlink" title="渲染模板"></a>渲染模板</h2><p>说简单点就是一个 html 的页面</p>
<p>还是需要先引入<code>render_template</code> 这个模块</p>
<p><code>from flask import render_template</code></p>
<p>然后在当前目录创建 <code>templates</code> 文件夹，并将 <code>html</code> 文件放入改文件夹中</p>
<p><a href="http://jinja.pocoo.org/docs/2.10/templates/" target="_blank" rel="external">参考</a></p>
<h2 id="静态文件处理"><a href="#静态文件处理" class="headerlink" title="静态文件处理"></a>静态文件处理</h2><p><code>CSS</code> 和 <code>JavaScipt</code> 文件的自动处理</p>
<ul>
<li>1.创建 <code>static</code> 文件夹</li>
<li>2.将静态文件放进 <code>static</code></li>
<li>3.修改<code>html</code>中的<code>css</code> <code>js</code> 的路径为 <code>/static/xxx.js</code></li>
</ul>
<h2 id="接收请求数据"><a href="#接收请求数据" class="headerlink" title="接收请求数据"></a>接收请求数据</h2><h4 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h4><p><code>from flask impoort request</code></p>
<h4 id="小例子-1"><a href="#小例子-1" class="headerlink" title="小例子"></a>小例子</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">from flask import Flask,request</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line">@app.route(&apos;/&apos;,methods=[&apos;POST&apos;,&apos;GET&apos;])</div><div class="line">def index():</div><div class="line"></div><div class="line">    return str(request.form)</div><div class="line">    #return str(request.headers)</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    app.run(host=&apos;127.0.0.1&apos;,port=80,debug=True)</div></pre></td></tr></table></figure>
<p><code>form</code> 和 <code>args</code> 返回值是字典格式的</p>
<h4 id="request请求对象-总结"><a href="#request请求对象-总结" class="headerlink" title="request请求对象 总结"></a>request请求对象 总结</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">path    # 请求的 url</div><div class="line">method  # 请求方法</div><div class="line">form    # post过来的数据</div><div class="line">args    # get 过来的数据</div><div class="line">json    # post 过来的json数据</div><div class="line">header  # 查看请求头</div></pre></td></tr></table></figure>
<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><p>确保在你的 HTML 表单中不要忘记设置属性 <code>enctype=&quot;multipart/form-data&quot;</code>， 否则浏览器将不传送文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">from flask import request</div><div class="line"></div><div class="line">@app.route(&apos;/upload&apos;, methods=[&apos;GET&apos;, &apos;POST&apos;])</div><div class="line">def upload_file():</div><div class="line">    if request.method == &apos;POST&apos;:</div><div class="line">        f = request.files[&apos;the_file&apos;]</div><div class="line">        f.save(&apos;/var/www/uploads/uploaded_file.txt&apos;)</div></pre></td></tr></table></figure>
<h2 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h2><p>你能够用 <code>redirect()</code> 函数重定向用户到其它地方。能够用 <code>abort()</code> 函数提前中断一个请求并带有一个错误代码</p>
<ul>
<li>redirect  重定向到一个url上</li>
<li>abort     自定义出错状态码，并且直接中断，不运行后面的</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">from flask import Flask,url_for,redirect,abort</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line">@app.route(&apos;/&apos;,methods=[&apos;POST&apos;,&apos;GET&apos;])</div><div class="line">def hello_world():</div><div class="line">    abort(404)</div><div class="line">    return redirect(url_for(&apos;test&apos;))</div><div class="line"></div><div class="line">@app.route(&apos;/test&apos;)</div><div class="line">def test():</div><div class="line">    return &apos;hello&apos;</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    app.run(host=&apos;127.0.0.1&apos;,port=80,debug=True)</div></pre></td></tr></table></figure>
<h2 id="错误页面"><a href="#错误页面" class="headerlink" title="错误页面"></a>错误页面</h2><p>使用 <code>errorhandler()</code> 装饰器</p>
<ul>
<li>创建的方法中应该含有一个 <code>error</code> 参数，用于确认到底是哪种出错</li>
<li>return 后面的数字就表示返回的状态码，如果是<code>405</code>就改成<code>405</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">from flask import Flask,url_for,redirect,abort</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line">@app.route(&apos;/&apos;,methods=[&apos;POST&apos;,&apos;GET&apos;])</div><div class="line">def hello_world():</div><div class="line">    abort(404)</div><div class="line"></div><div class="line">@app.errorhandler(404)</div><div class="line">def page_404(error):</div><div class="line">    return (error)</div><div class="line">    #return &apos;&lt;h1&gt;404 NOT FOUND&lt;/h1&gt;&apos;,404</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    app.run(host=&apos;127.0.0.1&apos;,port=80,debug=True)</div></pre></td></tr></table></figure>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>
        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

